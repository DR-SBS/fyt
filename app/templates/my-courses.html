{% if user.role=='student' %}
    {% extends 'student.html' %}
{% else %}
    {% extends 'tutor.html' %}
{% endif %}

{% block active %}
    activateMenu('my-courses')
{% endblock %}

{% block content %}
<div class="container">
    <legend class="border-bottom mb-4">My Courses</legend>
    
    <form action="{{ user.role }}/mycourse/save-course" class="form inline" method="POST" id='add-course-form' style="display: none;">
        {{ form.hidden_tag() }}

        <div class="form-row">
            <div class="form-group mx-sm-3 mb-2">
                {{ form.education_level.label(class='form-control-label') }}
                {{ form.education_level(class='form-control') }}
            </div>
            <div class="form-group mx-sm-3 mb-2">
                {{ form.course.label(class='form-control-label') }}
                {{ form.course(class='form-control') }}
            </div>
            <div class="form-group mx-sm-3 mb-2">
                {{ form.time.label(class='form-control-label') }}
                {{ form.time(class='form-control', type='time') }}
            </div>
            <div class="form-group mx-sm-3 mb-2">
                {{ form.cost.label(class='form-control-label') }}
                {{ form.cost(class='form-control') }}
            </div> 
            <div class="form-group mx-sm-3 mb-2">
                <label class="form-control-label"></label>
                {{ form.save(class='btn btn-success form-control') }}
            </div>        
        </div>
    </form>

    <div class='table-responsive'>
        <table class='table table-hover' id='my-courses-table'>
           <thead>
               <tr>
                    <th scope="col" >
                        <button type="button" class="btn btn-secondary btn-sm" id='add-new-course'>
                            <i class="fas fa-plus"></i>
                            <span></span>
                        </button>
                    </th>
                    <th scope="col">Education Level</th>
                    <th scope="col">Course</th>
                    <th scope="col">Time</th>
                    <th scope="col">Cost</th>

               </tr>
           </thead>
           <tbody>
            {% for value in values %}
                <tr>
                    <th scope="row">
                        <button type="button" class="btn btn-link btn-sm">
                            <i class="fas fa-trash"></i>
                            <span></span>
                        </button>
                        <button type="button" class="btn btn-link btn-sm">
                            <i class="fas fa-edit"></i>
                            <span></span>
                        </button>
                    </th>
                    <td> {{ value[0] }} </td>
                    <td> {{ value[1] }} </td>
                    <td> {{ value[2] }} </td>
                    <td> {{ value[3] }} </td>
                </tr>
            {% endfor %}
           </tbody>    
        </table>
    </div>

</div> 
{% endblock %}

{% block document_javascript %}
function addCourseForm(){
    var formEl = document.getElementById('add-course-form');
    if (isHidden(formEl)){
        formEl.style.display = "block";
    }
    else{
        formEl.style.display = "none";
    }
}

function isHidden(el){
    if (el.style.display === "none"){
        return true
    }
    else{
        return false
    }
}

var addBtn = document.getElementById('add-new-course');
addBtn.addEventListener('click', addCourseForm, false);
{% endblock %}
